---
layout: post
title: 1장. 개요
category: ubuntu1804
description: 홈 서버를 운용하기 위한 하드웨어, OS 선택 등을 설명하고 홈 서버에서 운용할 서비스들을 설명합니다.
---

# 홈 서버를 운영하게 된 계기

홈 서버를 운영하는 것이 로망이었다. 클라우드 서비스, 파일 서버, 커뮤니티, 블로그 등 하고 싶은 것이 많았다. 요즘엔 기업에서 무료로 제공하고 서비스도 잘 되어 있어서 매달 전기세를 내면서 홈 서버를 운용할 필요성이 적어졌다. 하지만 이리저리 뜯어보고 바꿔가는 것을 통해 얻는 경험과 즐거움이 더욱 크기 때문에 홈 서버를 운영하게 되었다.

# 도메인

홈 서버가 연결되어 있는 사설 IP주소는 가변적이기 때문에 도메인을 대여해서 내 홈 서버로 연결해두면 도메인주소로 쉽게 접근할 수 있게 된다. DDNS를 통해 IP가 바뀌더라도 자동으로 갱신되게 할 수 있다.

도메인은 무료 도메인을 대여할 예정이다. http://www.freenom.com 에서 .tk .ml .ga .cf .gq 같은 도메인을 무료로 대여할 수 있다. 만료되기 전에 연장하는 것은 무료이지만, 만료가 되면 **구매**를 해야 된다고 한다. 12개월 단위로 대여하고 만료 전 필히 연장 해야한다. 일단은 무료 도메인을 사용하기로 결정했다.

# 하드웨어 선택

|CPU|i3-4010U, 1.7GHz@2, 15W|
|Memory| 4GB DDR3L x 2|
|Storage 1|128GB M.2|
|Storage 2|2TB HDD using USB port|
|Display| 27", 1920 x 1080, 60Hz|

가정에서 개인적인 목적의 서버라면 싸고 전력 소모가 적고 안정성있는 제품을 고르면 된다. 나는 홈 서버를 2014년도부터 운용하기 시작했고 당시 파코즈에서 [NUCBOX라는 초미니 PC](http://www.parkoz.com/zboard/view.php?id=notices&no=1196)의 공구를 열어 구매했다.

>NUCBOX 34010 사양
>
>|모델명|CPU|벤치마크 점수| 클럭 및 TDP| 구매가격|
>|D34010WYKH | i3-4010U | 2514 | 1.7GHz@2 15W|399,000원|

> 구매 후 CPU불량으로 인해 반품요청을 했으나 냉각 팬이 포함된 업그레이드 버전으로 교환해주어서 무소음으로 잘 쓰고 있다 :)

128GB M.2 디스크와 4GB 메모리 2장도 구매했다.

## 전기요금

서버는 24시간 가동할 것이다. 

|상태|소비전력|하루 예상 사용량|
|시스템 idle + HDD 절전|5W|12Hr|
|시스템 idle + HDD 대기|11W|6Hr|
|작업 + HDD 엑세스|21W|6Hr|

위 표를 토대로 계산하면 월간 7.560kWh를 사용하게 된다. 가정에서 쓰는 전기 요금이 4만원이라고 가정한다면, 대략 1,600원 정도의 추가 비용이 발생한다. 이 정도 금액이라면 충분히 서버를 돌릴만 하다.

# OS 선택 : Ubuntu Server LTS 18.04
홈 서버를 구축하고 운용하는데 있어서 OS선택은 꽤 중요하다고 생각한다. 윈도우는 기본적으로 컴퓨터를 잘 다루지 못하는 사용자들도 친숙하게 시작할 수 있겠지만 근본적으로 Windows7 or 10은 서버용 OS로 적합하지 않다. 반면에 리눅스는 무료OS이며 오래전부터 많은 사람들이 리눅스를 서버로 사용해왔다. 대부분의 유명 툴들도 리눅스 기반으로 시작되었으며 그만큼 자료도 풍부하다.

리눅스 배포판도 여러 종류로 나뉜다. 리눅스의 공통적이고 핵심적인 부분은 동일하지만 각 배포판마다 특색이 있다. 배포판에는 Ubuntu, CentOS, RHEL 등이 있다. (안드로이드의 배포판은 삼성 안드로이드, LG 안드로이드, MIUI 등이 있다.)

 홈 서버를 운용하기 위한 배포판를 고르는 기준은 단순하게 정했다. **우분투**는 커뮤니티가 활발하기 때문에 인터넷 상 자료가 풍부하다. 매년 4월과 10월에 새 버전을 배포하는데, 4월에 배포하는 버전은 LTS(Long Term Support)버전이다. 2년 마다 새로운 LTS버전이 배포되고 배포된 LTS버전은 5년 동안 지원된다. 특별하게 우분투 18.04 LTS는 10년을 지원한다. [참고](https://www.serverwatch.com/server-news/canonical-extends-ubuntu-18.04-lts-linux-support-to-10-years.html)

우분투에도 여러 에디션이 있다. 기본적이고 텍스트-모드로 가볍게 설치되는 Ubuntu Server 에디션이 있고, 그래픽-모드로 설치되며 문서작업 툴, 브라우저, 미디어플레이어 등 이런저런 소프트웨어들이 첨가된 Ubuntu Desktop이 있다. 홈 서버는 그래픽-모드가 필요 없으므로 Ubuntu Server 에디션을 설치할 것이다.

# 디스크 분리
디스크는 128GB SSD와 2TB HDD를 두었다. 예상하겠지만 128GB SSD에는 OS를 설치할 것이고 2TB HDD에는 데이터를 저장할 것이다. 이렇게 디스크를 나눈다면 데이터 분류도 쉬워지고 시스템에 치명적인 오류가 발생하여도 HDD에 있는 데이터는 안전하게 보존할 수 있다. HDD에 저장되는 데이터를 더욱 안전하게 보관하기 위해 자체적으로 데이터 백업 및 복원을 지원하는 btrfs 파일시스템으로 만들 것이다.

# 서비스
홈 서버에서 아래와 같은 작업들을 할 것이다.

- Samba : 파일 쉐어. 원격으로 홈 서버의 파일에 접근할 수 있다.
- Transmission-daemon : 토렌트 다운로드.
- flexget : 원하는 토렌트를 자동으로 다운로드하도록 한다.
- Plex : 미디어 스트리밍. 동영상을 TV, 스마트폰 등에서 스트리밍 받을 수 있다.
- ~~블로그운영 : 이미 jekyll + github pages로 운영하고 있기 때문에 제외~~
- KVM : 가상머신. windows10을 설치하여 엑티브X 설치가 필요한 은행 및 관공서 같은 사이트를 이용할 것이다.
- Guacamole : 웹 브라우저에서 가상머신에 접근할 수 있다.
- ~~NextCloud : 클라우딩 서비스. 속도, 안정성 문제로 구글드라이브를 사용한다.~~
- ~~Pi-hole : 광고 차단. 웹 서핑 시 광고를 걸러 쾌적한 인터넷 서핑을 할 수 있도록 한다. 서버 성능 문제로 사용하지 않는다.~~
